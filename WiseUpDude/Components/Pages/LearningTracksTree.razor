@page "/learningtrackstree"

@using WiseUpDude.Model
@using WiseUpDude.Components.Controls
@inject ILearningTrackRepository LearningTrackRepo
@inject ILearningTrackCategoryRepository CategoryRepo
@inject ILearningTrackSourceRepository SourceRepo
@inject AuthenticationStateProvider AuthenticationStateProvider

@rendermode InteractiveServer

<h3>Learning Tracks Tree View</h3>

@if (addingTrack)
{
    <div class="mb-3">
        <input class="form-control d-inline w-auto me-2" @bind="newTrack.Name" placeholder="Track Name" />
        <input class="form-control d-inline w-auto me-2" @bind="newTrack.Description" placeholder="Description" />
        <button class="btn btn-sm btn-success me-1" @onclick="SaveNewTrack">Save</button>
        <button class="btn btn-sm btn-secondary" @onclick="CancelAddTrack">Cancel</button>
    </div>
}
else
{
    <button class="btn btn-primary mb-3" @onclick="ShowAddTrack">Add Learning Track</button>
}

@if (tracks == null)
{
    <p>Loading...</p>
}
else if (!tracks.Any())
{
    <div class="alert alert-info">No learning tracks found.</div>
}
else
{
    <ul class="list-group